<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Task 4 — DOM + Router + Validation</title>

  <!-- Color scheme + dynamic theme-color (synced below) -->
  <meta name="color-scheme" content="light dark" />
  <meta id="metaTheme" name="theme-color" content="#0f172a" />

  <!-- Bootstrap utilities (visuals are from styles.css) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Inter + Material Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Material+Symbols+Rounded" rel="stylesheet"/>

  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Top bar -->
  <nav class="topnav bg-panel border-bottom">
    <div class="container d-flex align-items-center justify-content-between gap-2">
      <a class="brand fw-800 d-flex align-items-center gap-2" href="#/home" data-link>
        <span class="logo" aria-hidden="true"></span> MiniSPA
      </a>
      <div class="navlinks d-flex align-items-center gap-2">
        <a data-link href="#/home">Home</a>
        <a data-link href="#/about">About</a>
        <a data-link href="#/account">Account</a>
        <button id="themeBtn" class="btn btn-ghost" type="button" aria-label="Toggle theme">
          <span class="material-symbols-rounded" aria-hidden="true">dark_mode</span>
        </button>
      </div>
    </div>
  </nav>

  <!-- Route outlet (flex:1 enables sticky footer) -->
  <main id="app" class="view fade-in" tabindex="-1"></main>

  <!-- Footer (always at bottom) -->
  <footer class="site-footer border-top bg-panel">
    <div class="container d-flex flex-wrap justify-content-between align-items-center gap-3">
      <span class="muted">© <span id="y"></span> Task 4 Demo</span>
      <span class="muted">Client-side routing • DOM updates • Validation</span>
    </div>
  </footer>

  <!-- SR live region -->
  <div id="srLive" class="sr-only" aria-live="polite"></div>

  <!-- App scripts -->
  <script src="router.js" defer></script>
  <script src="ui.js" defer></script>

  <!-- Theme + footer year (robust, single source of truth) -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Footer year
      const y = document.getElementById('y');
      if (y) y.textContent = new Date().getFullYear();

      // Theme toggle (persists + updates browser chrome color)
      const root = document.documentElement;
      const btn  = document.getElementById('themeBtn');
      const meta = document.getElementById('metaTheme');

      function applyTheme(t){
        root.setAttribute('data-theme', t);
        localStorage.setItem('t4_theme', t);
        // Icon ligature flips to the opposite choice
        btn.innerHTML = `<span class="material-symbols-rounded">${t==='dark'?'light_mode':'dark_mode'}</span>`;
        // Match address bar/tab color to current panel
        const panel = getComputedStyle(document.body).getPropertyValue('--panel').trim();
        if (meta) meta.setAttribute('content', panel || '#0f172a');
      }

      // Initial theme
      applyTheme(localStorage.getItem('t4_theme') || 'light');

      // Toggle
      btn?.addEventListener('click', () => {
        const next = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        applyTheme(next);
      });
    });
  </script>
</body>
</html>
